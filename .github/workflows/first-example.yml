name: First Workflow
on:
    push 
jobs:
    first_job:
        runs-on: ubuntu-latest
        steps:
            - name: checkout the code
              uses: actions/checkout@v4

            - name: list all the content
              run:  |
                ls -ltr
                cat README.md

            - name: run script
              run: |
                chmod +x ./ascii.sh
                ./ascii.sh

            -  name: Upload Dragon text file
               uses: actions/upload-artifact@v4
               with:
                    name: dragon-text-file
                    path: dragon.txt


            # - name: Install cowsay
            #   run: sudo apt-get install cowsay

            # - name: Execute Cow Say Command
            #   run: cowsay -f dragon "Run for cover" >> dragon.txt

            # - name: show the results
            #   run: cat dragon.txt
    
    second_job:
        runs-on: ubuntu-latest
        needs: [first_job]
        steps:
            -  name: Download Dragon text file
               uses: actions/download-artifact@v4
               with:
                    name: dragon-text-file

            - name: Test file search
              run: grep -i cowsay dragon.txt

    third_job:
        runs-on: ubuntu-latest
        needs: [second_job]
        steps:
            -  name: Download Dragon text file
               uses: actions/download-artifact@v4
               with:
                    name: dragon-text-file

            - name: Test file search
              run: cat dragon.txt